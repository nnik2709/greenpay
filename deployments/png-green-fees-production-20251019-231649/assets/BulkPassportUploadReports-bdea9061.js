import{u as j,r as l,j as t,I as c}from"./index-f386841f.js";import{X as N}from"./index.es-d321edd5.js";import{E as F}from"./ExportButton-bbdea4ab.js";import{g as R}from"./bulkUploadService-98bf8c81.js";import"./xlsx-f5126985.js";import"./file-spreadsheet-279cbcb4.js";const h=[{name:"Date",selector:e=>e.date,sortable:!0},{name:"File Name",selector:e=>e.fileName,sortable:!0},{name:"Uploaded By",selector:e=>e.uploadedBy,sortable:!0},{name:"Records",selector:e=>e.records,sortable:!0,right:!0},{name:"Vouchers",selector:e=>e.vouchers,sortable:!0,right:!0},{name:"Voucher Value",selector:e=>e.voucherValue,sortable:!0,right:!0},{name:"Payment Mode",selector:e=>e.paymentMode,sortable:!0},{name:"Total Amount",selector:e=>e.totalAmount,sortable:!0,right:!0},{name:"Discount (%)",selector:e=>e.discount,sortable:!0,right:!0},{name:"Collected",selector:e=>e.collected,sortable:!0,right:!0},{name:"Payment Code",selector:e=>e.paymentCode,sortable:!0}],E={header:{style:{minHeight:"56px"}},headRow:{style:{borderTopStyle:"solid",borderTopWidth:"1px",borderTopColor:"#E2E8F0",backgroundColor:"#F8FAFC"}},headCells:{style:{"&:not(:last-of-type)":{borderRightStyle:"solid",borderRightWidth:"1px",borderRightColor:"#E2E8F0"},color:"#475569",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"}},cells:{style:{"&:not(:last-of-type)":{borderRightStyle:"solid",borderRightWidth:"1px",borderRightColor:"#E2E8F0"}}}},d=({title:e,value:o})=>t.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg shadow-sm border border-slate-200",children:[t.jsx("p",{className:"text-sm text-slate-500",children:e}),t.jsx("p",{className:"text-2xl font-bold text-slate-800",children:o})]}),k=()=>{const{toast:e}=j(),[o,g]=l.useState([]),[x,i]=l.useState(!0),[n,b]=l.useState([]);l.useEffect(()=>{f()},[]),l.useEffect(()=>{b(o)},[o]);const f=async()=>{try{i(!0);const a=(await R(100)).map(r=>{var m,p;return{id:r.batch_id||r.id,date:new Date(r.created_at).toLocaleString(),fileName:r.file_name||"N/A",uploadedBy:((m=r.uploader)==null?void 0:m.email)||((p=r.uploader)==null?void 0:p.full_name)||"N/A",records:r.total_records||0,vouchers:r.successful_records||0,voucherValue:100,paymentMode:"N/A",totalAmount:(r.successful_records||0)*100,discount:0,collected:(r.successful_records||0)*100,paymentCode:r.batch_id||"N/A"}});g(a)}catch(s){console.error("Error fetching bulk uploads:",s),e({title:"Error",description:"Failed to load bulk upload reports",variant:"destructive"})}finally{i(!1)}},y=o.reduce((s,a)=>s+a.records,0),u=o.reduce((s,a)=>s+a.totalAmount,0),v=o.length>0?(u/o.length).toFixed(2):0;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent",children:"Bulk Passport Upload Reports"}),t.jsx(F,{data:n,columns:h,filename:"Bulk_Upload_Report",title:"Bulk Passport Upload Report"})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsx(d,{title:"Total Uploads",value:o.length}),t.jsx(d,{title:"Total Passports",value:y}),t.jsx(d,{title:"Total Revenue",value:`PGK ${u.toFixed(2)}`}),t.jsx(d,{title:"Avg. Amount/Upload",value:`PGK ${v}`})]}),t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-emerald-100",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[t.jsx(c,{placeholder:"Filter by File Name..."}),t.jsx(c,{placeholder:"Filter by Uploaded By..."}),t.jsx(c,{type:"date",placeholder:"Date From"})]}),t.jsx(N,{columns:h,data:n,pagination:!0,customStyles:E,highlightOnHover:!0,pointerOnHover:!0,progressPending:x})]})]})};export{k as default};
