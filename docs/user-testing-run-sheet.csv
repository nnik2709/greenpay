Scenario ID,Role,Description,Pre-req data (auto),Pre-req data (manual),Steps (numbered, concise),Expected result,Status,Notes/Evidence link
A1,Counter_Agent,"Individual purchase with PDF","App deployed; payment methods enabled; inbox reachable","Test inbox address; sample passport number; payment method choice","1) Login 2) Create individual purchase 3) Download voucher PDF 4) Verify barcode/URL 5) Check email attachment","Purchase succeeds; PDF correct; email received with PDF; no console errors",TODO,"Add screenshot/PDF/email link"
A2,Counter_Agent,"Scan and validate voucher (valid and invalid)","Valid existing voucher code","Invalid/expired voucher code sample","1) Login 2) Open scan/validate 3) Enter valid code 4) Enter invalid/expired code","Valid code shows success; invalid shows friendly error; no crashes",TODO,"Add console/network log link"
A3,Counter_Agent,"Add passport to existing voucher","Voucher in pending_passport status","Passport number sample; traveler name","1) Login 2) Open add-passport flow 3) Enter passport details 4) Save","Voucher updated with passport; confirmation shown; no console errors",TODO,"Add screenshot/log"
RA-CA,Counter_Agent,"Role activities smoke (landing, scan)","Auth state for agent; app reachable",,"1) Go /app/agent 2) Verify cards 3) Go /app/scan","Pages load; elements visible; no console/network errors",PASS,"Playwright smoke (role-activities) passed"
IP-CA,Counter_Agent,"Individual purchase create + print PDF","Auth state for agent; payment modes active",,"1) Go /app/passports/create 2) Fill passport 3) Select payment 4) Process 5) Print voucher (saves PDF)","Voucher generated; print dialog opens; PDF saved",PASS,"PDF saved test-results/voucher-*.pdf (Playwright smoke)"
F1,Finance_Manager,"Corporate vouchers invoice-first (GST ON)","GST enabled in settings; customer exists; email inbox reachable","Customer details (name/email/phone/address/TIN); payment method","1) Login 2) Create corporate invoice 3) Pay full amount 4) Generate vouchers 5) Bulk email PDF","Invoice status paid; vouchers generated; bulk PDF emailed; totals include GST",TODO,"Add email/PDF link"
F2,Finance_Manager,"Corporate vouchers invoice-first (GST OFF)","GST disabled in settings; customer exists; email inbox reachable","Customer details; payment method","1) Login 2) Create corporate invoice 3) Pay full amount 4) Generate vouchers 5) Bulk email PDF","Invoice status paid; vouchers generated; totals exclude GST; email sent",TODO,"Add email/PDF link"
F3,Finance_Manager,"Quotation to invoice to vouchers","Quotation feature enabled; email inbox reachable","Customer details; discount value (if any)","1) Create quotation 2) Convert to invoice 3) Pay invoice 4) Generate vouchers 5) Email vouchers","Quotation converted; invoice paid; vouchers generated once; email sent",BLOCKED,"Creation did not persist; list shows 'No quotations found' (no Convert button)"
F4,Finance_Manager,"Duplicate voucher prevention per invoice","Invoice with vouchers already generated","Invoice ID used in prior generation","1) Attempt regenerate vouchers for same invoice","System blocks duplicate generation with clear message",TODO,"Add screenshot/log"
RA-FM,Finance_Manager,"Role activities smoke (corporate exit pass, vouchers, payments, quotations)","Auth state for finance; app reachable",,"1) Go /payments/corporate-exit-pass 2) Vouchers list 3) Payments 4) Quotations","Pages load; key elements visible; no console/network errors",PASS,"Playwright smoke (role-activities) passed"
FA1,Flex_Admin,"Settings: GST toggle + policy content","Flex_Admin account; settings endpoint available","Policy text to update","1) Login 2) Toggle GST on/off 3) Save 4) Update terms/privacy/refunds content 5) Verify /terms /privacy /refunds","GST toggle persists; policies render sanitized content; links work",TODO,"Add before/after screenshots"
FA2,Flex_Admin,"Policy links in voucher emails","Email inbox reachable","Recipient email","1) Trigger voucher email 2) Open email 3) Click Terms/Privacy/Refunds links","Email received with policy links; links open correctly",TODO,"Add email/screenshot"
RA-FA,Flex_Admin,"Role activities smoke (settings, payment modes, email templates, users)","Auth state for flex admin; app reachable",,"1) Go /admin/settings 2) /admin/payment-modes 3) /admin/email-templates 4) /admin/users","Pages load; elements visible; no console/network errors",PASS,"Playwright smoke (role-activities) passed"
P1,Public,"Public policy pages","Site reachable anonymously",,"1) Open /terms 2) /privacy 3) /refunds","Pages load; structured content; no console errors",TODO,"Add screenshot"
RA-PUB,Public,"Role activities smoke (policy pages)","Public access","None","1) Open /terms 2) /privacy 3) /refunds","Pages load; headings visible; no console/network errors",PASS,"Playwright role-activities project passed"
E1,Any,"Error handling for invalid voucher","App reachable; console capture on","Invalid voucher code","1) Enter invalid voucher code 2) Submit","Friendly error shown; no uncaught exceptions",TODO,"Add console log"
E2,Any,"Network/API failure handling","Ability to simulate offline/500","Simulated outage steps","1) Trigger request while offline/500 2) Observe UI","User-facing error shown; no crash; retries or guidance present",TODO,"Add console/network log"

