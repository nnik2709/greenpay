import{s as x,u as ze,v as Qe,r as t,j as e,m as F,B as h,S as We,C as B,d as fe,I as c,L as o,w as Ye,a as Je,b as Xe,x as Ze,P as Ne,D as be,i as Se,k as _e,l as we,A as es,n as ss,o as as}from"./index-f386841f.js";import{R as ts,a as rs}from"./radio-group-188719c7.js";import{S as Ce,a as Pe,b as De,c as Ee,d as b}from"./select-14269127.js";import{s as is,c as ls}from"./passportsService-036110f9.js";import{c as ns}from"./individualPurchasesService-44373278.js";import{g as cs}from"./paymentModesStorage-3d8fa5db.js";import{V as os}from"./VoucherPrint-580d5f3f.js";import{u as H,w as ds}from"./xlsx-f5126985.js";import{P as Ae}from"./plus-42d2a69c.js";import{S as us}from"./search-0da320f8.js";import{H as hs}from"./hash-110faeb3.js";import{U as ms}from"./user-806b4eaa.js";import{D as ps}from"./dollar-sign-54a6a05d.js";import{C as xs}from"./calendar-a622c72a.js";import{S as vs}from"./save-bfaf2e9f.js";const js=async()=>{try{const{data:r,error:d}=await x.from("settings").select("*").maybeSingle();if(d&&d.code!=="PGRST116")throw d;return r||{voucher_validity_days:30,default_amount:50}}catch(r){return console.error("Error loading settings:",r),{voucher_validity_days:30,default_amount:50}}},ys=async r=>{try{const{data:d}=await x.from("settings").select("id").maybeSingle();if(d){const{data:g,error:j}=await x.from("settings").update({voucher_validity_days:r.voucher_validity_days,default_amount:r.default_amount,updated_at:new Date().toISOString()}).eq("id",d.id).select().single();if(j)throw j;return g}else{const{data:g,error:j}=await x.from("settings").insert([{voucher_validity_days:r.voucher_validity_days,default_amount:r.default_amount}]).select().single();if(j)throw j;return g}}catch(d){throw console.error("Error updating settings:",d),d}},Is=()=>{var ye;const{toast:r}=ze(),{user:d}=Qe(),[g,j]=t.useState([]),[C,z]=t.useState([]),[ke,Q]=t.useState(!0),[P,Te]=t.useState(""),[S,Fe]=t.useState("all"),[Ie,W]=t.useState(!1),[f,_]=t.useState(0),[I,Y]=t.useState(""),[J,V]=t.useState([]),[m,L]=t.useState(null),[Ve,D]=t.useState(!1),[n,v]=t.useState({passportNumber:"",surname:"",givenName:"",nationality:"",dob:"",sex:"",dateOfExpiry:""}),[M,Le]=t.useState([]),[E,X]=t.useState(""),[A,Z]=t.useState(50),[ee,se]=t.useState(0),[G,ae]=t.useState(50),[O,te]=t.useState(""),[re,ie]=t.useState(""),[le,ne]=t.useState(""),[ce,oe]=t.useState(!1),[y,q]=t.useState(null),[Me,R]=t.useState(!1),[Ge,k]=t.useState(!1),[N,U]=t.useState({voucher_validity_days:30,default_amount:50}),[de,ue]=t.useState(!1),T=A-A*(ee/100),he=G-T;t.useEffect(()=>{me(),pe(),qe()},[]),t.useEffect(()=>{const s=()=>{document.hidden||pe()};return document.addEventListener("visibilitychange",s),()=>document.removeEventListener("visibilitychange",s)},[]),t.useEffect(()=>{Oe()},[P,g,S]);const me=async()=>{Q(!0);try{const{data:s,error:a}=await x.from("transactions").select("*").order("created_at",{ascending:!1});if(a)throw console.error("Supabase error:",a),a;const u=await Promise.all((s||[]).map(async l=>{let p=null;if(l.transaction_type==="individual"||l.transaction_type==="individual_purchase"){const{data:i}=await x.from("individual_purchases").select("id, voucher_code, valid_until").eq("id",l.reference_id).maybeSingle();p=i}else if(l.transaction_type==="corporate"||l.transaction_type==="corporate_bulk"){const{data:i}=await x.from("corporate_vouchers").select("id, voucher_code, valid_until").eq("id",l.reference_id).maybeSingle();p=i}return{...l,voucher:p}}));j(u||[]),z(u||[])}catch(s){console.error("Error loading transactions:",s),r({variant:"destructive",title:"Error",description:`Failed to load transactions: ${s.message}`})}finally{Q(!1)}},Oe=()=>{let s=g;if(S!=="all"&&(s=s.filter(a=>S==="individual"?a.transaction_type==="individual"||a.transaction_type==="individual_purchase":S==="corporate"?a.transaction_type==="corporate"||a.transaction_type==="corporate_bulk":!0)),P.trim()){const a=P.toLowerCase();s=s.filter(u=>{var l,p,i,w,ge;return((l=u.passport_number)==null?void 0:l.toLowerCase().includes(a))||((p=u.id)==null?void 0:p.toLowerCase().includes(a))||((i=u.payment_method)==null?void 0:i.toLowerCase().includes(a))||((ge=(w=u.voucher)==null?void 0:w.voucher_code)==null?void 0:ge.toLowerCase().includes(a))})}z(s)},pe=async()=>{const a=(await cs()).filter(u=>u.active);Le(a),a.length>0&&X(a[0].name)},qe=async()=>{const s=await js();U(s),Z(s.default_amount||50)},Re=async()=>{ue(!0);try{await ys(N),r({title:"Settings Saved",description:"Voucher validity and default amount updated successfully."}),k(!1)}catch{r({variant:"destructive",title:"Error",description:"Failed to save settings."})}finally{ue(!1)}},xe=async()=>{if(!I.trim()){r({variant:"destructive",title:"Search Empty",description:"Enter a passport number."});return}try{const s=await is(I.trim()),a=new Date,{data:u}=await x.from("individual_purchases").select("passport_number, valid_until").in("passport_number",s.map(i=>i.passport_number)),l=new Set((u||[]).filter(i=>new Date(i.valid_until)>a).map(i=>i.passport_number)),p=s.filter(i=>!l.has(i.passport_number));p.length===0&&s.length>0&&r({variant:"destructive",title:"Passport Unavailable",description:"This passport already has an active voucher."}),V(p)}catch(s){console.error("Search error:",s),r({variant:"destructive",title:"Search Failed",description:"Failed to search passports."})}},Ue=s=>{L(s),_(1)},Ke=()=>{D(!0),V([])},$e=async()=>{if(!n.passportNumber||!n.surname||!n.givenName){r({variant:"destructive",title:"Missing Fields",description:"Please fill required fields."});return}try{const s=await ls(n,d==null?void 0:d.id);L(s),D(!1),_(1),r({title:"Success",description:"Passport created successfully."})}catch{r({variant:"destructive",title:"Error",description:"Failed to create passport."})}},Be=async()=>{if(G<T){r({variant:"destructive",title:"Insufficient Amount",description:"Collected amount is less than the total."});return}const s=M.find(a=>a.name===E);if(s!=null&&s.collectCardDetails&&(!O||!re||!le)){r({variant:"destructive",title:"Card Details Required",description:"Please enter all card details."});return}oe(!0);try{const a=new Date;a.setDate(a.getDate()+(N.voucher_validity_days||30));const u={passportId:m.id,passportNumber:m.passport_number||m.passportNumber,amount:T,paymentMethod:E,cardLastFour:s!=null&&s.collectCardDetails?O.slice(-4):null,nationality:m.nationality,validUntil:a.toISOString()},l=await ns(u,d==null?void 0:d.id);q(l),_(2),me(),r({title:"Success!",description:"Payment processed and voucher generated."})}catch(a){console.error("Payment error:",a),r({variant:"destructive",title:"Error",description:`Failed to process payment: ${a.message}`})}finally{oe(!1)}},ve=()=>{W(!1),_(0),L(null),Y(""),V([]),D(!1),v({passportNumber:"",surname:"",givenName:"",nationality:"",dob:"",sex:"",dateOfExpiry:""}),q(null),se(0),ae(A),te(""),ie(""),ne("")},K=s=>s.voucher&&s.voucher.voucher_code?s.voucher.voucher_code:"N/A",$=s=>s.transaction_type==="individual"||s.transaction_type==="individual_purchase"?"Individual":s.transaction_type==="corporate"||s.transaction_type==="corporate_bulk"?"Corporate":"Unknown",je=async s=>{if(!s.voucher){r({variant:"destructive",title:"No Voucher",description:"No voucher found for this transaction."});return}try{let a=null;if(s.transaction_type==="individual"||s.transaction_type==="individual_purchase"){const{data:l}=await x.from("individual_purchases").select("*").eq("id",s.reference_id).single();a=l}else{const{data:l}=await x.from("corporate_vouchers").select("*").eq("id",s.reference_id).single();a=l}a&&(q(a),R(!0))}catch(a){console.error("Error loading voucher:",a),r({variant:"destructive",title:"Error",description:"Failed to load voucher details."})}},He=()=>{try{const s=C.map(i=>{var w;return{"Payment ID":i.id,Type:$(i),"Passport Number":i.passport_number||"N/A","Exit Pass ID":K(i),"Amount (PGK)":i.amount,"Payment Method":i.payment_method||"N/A",Date:new Date(i.created_at).toLocaleDateString(),Time:new Date(i.created_at).toLocaleTimeString(),Nationality:i.nationality||"N/A","Valid Until":(w=i.voucher)!=null&&w.valid_until?new Date(i.voucher.valid_until).toLocaleDateString():"N/A"}}),a=H.json_to_sheet(s),u=[{wch:40},{wch:12},{wch:15},{wch:25},{wch:12},{wch:15},{wch:12},{wch:12},{wch:15},{wch:15}];a["!cols"]=u;const l=H.book_new();H.book_append_sheet(l,a,"Transactions");const p=`Transactions_${new Date().toISOString().split("T")[0]}.xlsx`;ds(l,p),r({title:"Export Successful",description:`Exported ${s.length} transactions to ${p}`})}catch(s){console.error("Export error:",s),r({variant:"destructive",title:"Export Failed",description:"Failed to export transactions to Excel."})}};return e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent",children:"Purchases & Transactions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{variant:"outline",onClick:()=>k(!0),children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Settings"]}),e.jsxs(h,{onClick:()=>W(!0),className:"bg-gradient-to-r from-emerald-500 to-teal-600",children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Add New Payment"]})]})]}),e.jsx(B,{children:e.jsx(fe,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(us,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),e.jsx(c,{placeholder:"Search by passport number, payment ID, voucher code, or method...",className:"pl-10",value:P,onChange:s=>Te(s.target.value)})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(o,{className:"text-sm text-slate-600",children:"Type:"}),e.jsxs(Ce,{value:S,onValueChange:Fe,children:[e.jsx(Pe,{className:"w-40",children:e.jsx(De,{placeholder:"All Types"})}),e.jsxs(Ee,{children:[e.jsx(b,{value:"all",children:"All Types"}),e.jsx(b,{value:"individual",children:"Individual"}),e.jsx(b,{value:"corporate",children:"Corporate"})]})]})]}),e.jsxs(h,{variant:"outline",onClick:He,children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Export"]})]})})}),e.jsxs(B,{children:[e.jsx(Je,{children:e.jsxs(Xe,{children:["All Transactions (",C.length,")"]})}),e.jsx(fe,{children:ke?e.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading transactions..."}):C.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No transactions found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-left text-sm text-slate-600",children:[e.jsx("th",{className:"pb-3 font-semibold",children:"Payment ID"}),e.jsx("th",{className:"pb-3 font-semibold",children:"Type"}),e.jsx("th",{className:"pb-3 font-semibold",children:"Passport Number"}),e.jsx("th",{className:"pb-3 font-semibold",children:"Exit Pass ID"}),e.jsx("th",{className:"pb-3 font-semibold",children:"Amount"}),e.jsx("th",{className:"pb-3 font-semibold",children:"Payment Method"}),e.jsx("th",{className:"pb-3 font-semibold",children:"Date"}),e.jsx("th",{className:"pb-3 font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:C.map(s=>e.jsxs("tr",{className:"border-b hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hs,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"font-mono text-sm",children:s.id.slice(0,8)})]})}),e.jsx("td",{className:"py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${$(s)==="Individual"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:$(s)})}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{children:s.passport_number})]})}),e.jsx("td",{className:"py-4",children:K(s)!=="N/A"?e.jsx("button",{onClick:()=>je(s),className:"font-mono text-sm text-emerald-600 hover:text-emerald-700 hover:underline cursor-pointer",children:K(s)}):e.jsx("span",{className:"font-mono text-sm text-slate-400",children:"N/A"})}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"w-4 h-4 text-slate-400"}),e.jsxs("span",{className:"font-semibold",children:["PGK ",s.amount]})]})}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{children:s.payment_method})]})}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]})}),e.jsx("td",{className:"py-4",children:e.jsx(h,{size:"sm",variant:"outline",onClick:()=>je(s),disabled:!s.voucher,children:e.jsx(Ne,{className:"w-4 h-4"})})})]},s.id))})]})})})]}),e.jsx(be,{open:Ie,onOpenChange:ve,children:e.jsxs(Se,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(_e,{children:e.jsxs(we,{children:[f===0&&"Select or Create Passport",f===1&&"Process Payment",f===2&&"Voucher Generated"]})}),e.jsxs(es,{mode:"wait",children:[f===0&&e.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:Ve?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Create New Passport"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Passport Number *"}),e.jsx(c,{value:n.passportNumber,onChange:s=>v({...n,passportNumber:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Nationality *"}),e.jsx(c,{value:n.nationality,onChange:s=>v({...n,nationality:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Surname *"}),e.jsx(c,{value:n.surname,onChange:s=>v({...n,surname:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Given Name *"}),e.jsx(c,{value:n.givenName,onChange:s=>v({...n,givenName:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Date of Birth *"}),e.jsx(c,{type:"date",value:n.dob,onChange:s=>v({...n,dob:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Sex *"}),e.jsxs(Ce,{value:n.sex,onValueChange:s=>v({...n,sex:s}),children:[e.jsx(Pe,{children:e.jsx(De,{placeholder:"Select sex"})}),e.jsxs(Ee,{children:[e.jsx(b,{value:"Male",children:"Male"}),e.jsx(b,{value:"Female",children:"Female"}),e.jsx(b,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Passport Expiry Date *"}),e.jsx(c,{type:"date",value:n.dateOfExpiry,onChange:s=>v({...n,dateOfExpiry:s.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>D(!1),children:"Cancel"}),e.jsx(h,{onClick:$e,children:"Create & Continue"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{placeholder:"Search passport number or name...",value:I,onChange:s=>Y(s.target.value),onKeyDown:s=>s.key==="Enter"&&xe()}),e.jsx(h,{onClick:xe,children:"Search"}),e.jsxs(h,{variant:"outline",onClick:Ke,children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"New"]})]}),J.length>0&&e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:J.map(s=>e.jsx(B,{className:"p-4 cursor-pointer hover:bg-slate-50 transition-colors",onClick:()=>Ue(s),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:[s.given_name," ",s.surname]}),e.jsxs("p",{className:"text-sm text-slate-500",children:[s.passport_number," - ",s.nationality]})]}),e.jsx(h,{size:"sm",children:"Select"})]})},s.id))})]})},"passport"),f===1&&m&&e.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Selected Passport:"}),e.jsxs("p",{className:"font-semibold",children:[m.given_name||m.givenName," ",m.surname," - ",m.passport_number||m.passportNumber]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Amount (PGK)"}),e.jsx(c,{type:"number",value:A,onChange:s=>Z(parseFloat(s.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Discount (%)"}),e.jsx(c,{type:"number",value:ee,onChange:s=>se(parseFloat(s.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"After Discount"}),e.jsx(c,{value:T.toFixed(2),readOnly:!0,className:"bg-slate-100 font-bold"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Collected Amount"}),e.jsx(c,{type:"number",value:G,onChange:s=>ae(parseFloat(s.target.value)||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Change"}),e.jsx(c,{value:he>0?he.toFixed(2):"0.00",readOnly:!0,className:"bg-slate-100"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{children:"Payment Method"}),e.jsx(ts,{value:E,onValueChange:X,className:"grid grid-cols-3 gap-3",children:M.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 border rounded-lg p-3",children:[e.jsx(rs,{value:s.name,id:s.name}),e.jsx(o,{htmlFor:s.name,className:"cursor-pointer",children:s.name})]},s.id))})]}),((ye=M.find(s=>s.name===E))==null?void 0:ye.collectCardDetails)&&e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[e.jsx("h3",{className:"font-semibold",children:"Card Information"}),e.jsx(c,{placeholder:"Card Number",value:O,onChange:s=>te(s.target.value)}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(c,{placeholder:"MM/YY",value:re,onChange:s=>ie(s.target.value)}),e.jsx(c,{placeholder:"CVC",value:le,onChange:s=>ne(s.target.value),type:"password"})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(h,{variant:"outline",onClick:()=>_(0),children:"Back"}),e.jsx(h,{onClick:Be,disabled:ce,children:ce?"Processing...":"Process Payment"})]})]},"payment"),f===2&&y&&e.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-green-700 mb-2",children:"Payment Successful!"}),e.jsxs("p",{className:"text-green-600",children:["Voucher generated: ",y.voucher_code]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-600",children:"Passport:"}),e.jsx("p",{className:"font-semibold",children:m.passport_number||m.passportNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-600",children:"Amount:"}),e.jsxs("p",{className:"font-semibold",children:["PGK ",y.amount]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-600",children:"Valid Until:"}),e.jsx("p",{className:"font-semibold",children:new Date(y.valid_until).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-600",children:"Payment Method:"}),e.jsx("p",{className:"font-semibold",children:y.payment_method})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{className:"flex-1",onClick:()=>R(!0),children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Print Voucher"]}),e.jsx(h,{className:"flex-1",variant:"outline",onClick:ve,children:"Done"})]})]},"voucher")]})]})}),e.jsx(be,{open:Ge,onOpenChange:k,children:e.jsxs(Se,{children:[e.jsxs(_e,{children:[e.jsx(we,{children:"Voucher Settings"}),e.jsx(ss,{children:"Configure default voucher validity period and amount."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Voucher Validity (Days)"}),e.jsx(c,{type:"number",value:N.voucher_validity_days,onChange:s=>U({...N,voucher_validity_days:parseInt(s.target.value)||30})}),e.jsx("p",{className:"text-xs text-slate-500",children:"New vouchers will be valid for this many days"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Default Amount (PGK)"}),e.jsx(c,{type:"number",value:N.default_amount,onChange:s=>U({...N,default_amount:parseFloat(s.target.value)||50})}),e.jsx("p",{className:"text-xs text-slate-500",children:"Default payment amount for new purchases"})]})]}),e.jsxs(as,{children:[e.jsx(h,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsxs(h,{onClick:Re,disabled:de,children:[e.jsx(vs,{className:"w-4 h-4 mr-2"}),de?"Saving...":"Save Settings"]})]})]})}),y&&e.jsx(os,{voucher:y,isOpen:Me,onClose:()=>R(!1),voucherType:"Individual"})]})};export{Is as default};
